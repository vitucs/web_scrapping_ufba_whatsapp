<h1>Web Scraping com Selenium e BeautifulSoup</h1>
<p>Este é um código Python que realiza Web Scraping em uma página HTML utilizando as bibliotecas Selenium e BeautifulSoup. Ele busca uma tabela de convocações e publicações no site <a href="https://www.ingresso.ufba.br/">https://www.ingresso.ufba.br/</a> e verifica a cada segundo se houve atualização na tabela. Caso haja uma nova atualização, o código utiliza o navegador Google Chrome e a biblioteca Selenium para enviar uma mensagem para contatos previamente definidos no WhatsApp Web.</p>
<h2>Como funciona</h2>
<p>O código inicia importando as bibliotecas necessárias: <code>urlopen</code> do <code>urllib.request</code>, <code>BeautifulSoup</code>, <code>datetime</code>, <code>schedule</code> e <code>webdriver</code> do Selenium, além de <code>Keys</code> e <code>By</code> do webdriver. Também são definidas algumas variáveis e listas que serão utilizadas mais tarde no código.</p>
<p>A função <code>web_scraping()</code> é definida para buscar as informações da tabela no site. Para isso, a função acessa a página com a função <code>urlopen</code>, cria um objeto BeautifulSoup com o conteúdo HTML da página e busca a tabela de convocações e publicações no site. Depois, a função procura pelas linhas da tabela e adiciona os textos das células que contém "span" em uma lista chamada <code>lista_trs</code>.</p>
<p>Em seguida, o código utiliza a biblioteca <code>schedule</code> para agendar a execução da função <code>web_scraping()</code> a cada segundo. Depois, há um loop infinito que executa a função <code>run_pending()</code> da biblioteca <code>schedule</code> e espera um segundo com a função <code>time.sleep(1)</code>.</p>
<p>O código verifica se a variável <code>atual</code> é diferente da variável <code>anterior</code>. Se sim, é considerado que houve uma nova atualização na tabela do site. Em seguida, o código define uma lista de contatos para quem será enviado uma mensagem pelo WhatsApp Web.</p>
<p>Cada contato é iterado e o código utiliza o webdriver do Google Chrome para acessar o site do WhatsApp Web e enviar a mensagem para o contato. A mensagem é criada com a nova atualização na tabela e a última mensagem enviada (que é armazenada na variável <code>ultMsg</code>). Para enviar a mensagem, o código localiza a caixa de pesquisa do contato, digita a mensagem, localiza o botão de envio e clica nele.</p>
<p>Por fim, a variável <code>anterior</code> é atualizada para o valor de <code>atual</code>, o número de novas atualizações é impresso no console e o loop recomeça.</p>
